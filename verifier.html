<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Solivre Verifier - LIVRE OS MVP</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <header class="mvp-nav">
    <a class="mvp-logo" href="/">LIVRE<span>OS</span></a>
    <nav>
      <a href="/">Home</a>
      <a href="/agent">Agent</a>
      <a href="/verifier" class="active">Verifier</a>
    </nav>
  </header>

  <div class="container">
    <h1>Solivre Verifier — Proof Lens</h1>
    <p>
      This Verifier checks that a cryptographic proof actually matches a stored identity
      and satisfies the active template (age ≥ 18, country = PT).
      Paste the <strong>Identity JSON</strong> and the <strong>Proof JSON</strong> you exported from the Agent.
    </p>

    <!-- Explanation card -->
    <div class="card">
      <h2>How Identity & Proof JSON work</h2>
      <p>
        <strong>Identity JSON</strong> represents the bound identity record inside the node.
        It should look roughly like this:
      </p>
      <pre>
{
  "identityId": "…",
  "commitment": "…",
  "attributesRoot": "…"
}
      </pre>

      <p>
        <strong>Proof JSON</strong> represents a single, deterministic proof tied to that identity:
      </p>
      <pre>
{
  "identityId": "…",
  "templateId": "age_over_18_and_resident_pt",
  "proofHash": "…",
  "issuedAt": "…"
}
      </pre>

      <p class="status">
        The Verifier recomputes what the proof should be from the Vault’s stored identity.
        If everything matches and the attributes satisfy the template, the proof is valid.
      </p>
    </div>

    <!-- Identity JSON input -->
    <div class="card">
      <h2>1. Paste Identity JSON</h2>
      <p class="status">
        Paste the <strong>Identity JSON</strong> that you copied or downloaded from the Agent.
        It should contain <code>identityId</code>, <code>commitment</code>, and <code>attributesRoot</code>.
      </p>

      <label for="identity-json">Identity JSON</label>
      <textarea
        id="identity-json"
        rows="7"
        placeholder='{"identityId":"…","commitment":"…","attributesRoot":"…"}'
      ></textarea>
    </div>

    <!-- Proof JSON input + verify -->
    <div class="card">
      <h2>2. Paste Proof JSON & Verify</h2>
      <p class="status">
        Paste the <strong>Proof JSON</strong> generated by the Agent for this identity.
        Then click <strong>Verify Proof</strong> to check if it is still valid.
      </p>

      <label for="proof-json">Proof JSON</label>
      <textarea
        id="proof-json"
        rows="8"
        placeholder='{"identityId":"…","templateId":"age_over_18_and_resident_pt","proofHash":"…","issuedAt":"…"}'
      ></textarea>

      <button id="verify-btn">Verify Proof</button>
      <div class="status" id="verify-status"></div>
      <pre id="verify-result"></pre>
    </div>
  </div>

  <script src="assets/js/verifier.js"></script>
</body>
</html>
